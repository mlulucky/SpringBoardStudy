<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.acorn.springboardstudy.mapper.BoardMapper">
    <resultMap id="BoardMap" type="BoardDto">
        <id column="b_id" property="bId"/>
        <result column="content" property="content"/>
        <result column="title" property="title"/>
        <result column="u_id" property="uId"/>
        <result column="post_time" property="postTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="status" property="status"/>
        <result column="view_count" property="viewCount"/>
        <result column="login_user_like_status" property="loginUserLikeStatus"/> <!-- Ïú†Ï†ÄÍ∞Ä Ï¢ãÏïÑÏöîÌïú ÎÇ¥Ïó≠ -->
        <!-- column : Ï°∞Ìöå Í≤∞Í≥ºÏùò ÌÖåÏù¥Î∏î ÌïúÏ§ÑÏùò ÎÇ¥Ïó≠ (ÌÖåÏù¥Î∏îÏùò Î°úÏö∞(ÌäúÌîå) Ï§ëÏùò ÎÇ¥Ïó≠) // ÌååÎùºÎØ∏ÌÑ∞Î•º Ï†ÑÎã¨Ìï† Ïàò ÏóÜÎã§.  -->
<!--        <association property="loginUserLike"-->
<!--                    select="com.acorn.springboardstudy.mapper.BoardLikeMapper.findByBIdAndUId"-->
<!--                     column="b_id,u_id">--> <!-- u_id Î•º Ï†ÑÎã¨Ìï†ÏàòÏóÜÎã§!! -->
<!--        </association>-->
        <association property="likes"
                        select="com.acorn.springboardstudy.mapper.BoardLikeMapper.countStatusByBId"
                        column="b_id"
                        fetchType="eager"/>
        <association property="user"
                    select="com.acorn.springboardstudy.mapper.UserMapper.findByUId"
                    column="u_id"
                    fetchType="lazy"/> <!-- Í∏ÄÏì¥Ïù¥ Ïú†Ï†ÄÍ∞Ä ÎàÑÍµ∞ÏßÄ ÌôïÏù∏ --> <!-- Ïª¨Î†âÏÖòÏù¥ Í∞ÄÏû• ÏïÑÎûòÏóê ÏúÑÏπò -->
        <!-- Ï°∞Ïù∏ÌïòÎäîÍ≤ÉÏ≤òÎüº Ìò∏Ï∂úÎêòÍ≤å ÌïòÎäî -->
        <collection property="replies"
                    select="com.acorn.springboardstudy.mapper.BoardReplyMapper.findByBIdAndParentBrIdIsNull"
                    column="b_id"
                    fetchType="lazy"/>

        <!-- üçècollection - Ï°∞Ìöå(Ï∂úÎ†•) // join ÏïàÌïòÍ≥† Ïª¨Î†âÏÖòÏóêÏÑú select Î°ú Ìò∏Ï∂ú(join Í≥º Í∞ôÏù¥ ÎèôÏûë) // Mapper Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌïÑÏöî -->
        <collection property="imgs"
                    select="com.acorn.springboardstudy.mapper.BoardImgMapper.findByBId"
                    column="b_id"
                    fetchType="lazy"/> <!-- Ï°∞ÌöåÌïòÎäî Í≥≥ÏóêÏÑúÎßå Ï°∞Ïù∏Ï≤òÎüº Ï°∞Ìöå ÌïòÍ≤†Îã§. -->

        <collection property="tags"
                    select="com.acorn.springboardstudy.mapper.BoardHashTagMapper.findByBId"
                    column="b_id"
                    fetchType="lazy"/>
<!--        Ïª¨Î†âÏÖòÏùò property Î•º Ï°∞ÌöåÌï¥ÏïºÏßÄ ÎÇòÏò®Îã§Ìñê. Ïª¨Îü≠ÏÑºÏùÑ -->
        <!--  üçécollection Î≥µÌï©Í¥ÄÍ≥Ñ ÎßµÌïë (üçè1:N join ÌñàÏùÑÎïå ÏÇ¨Ïö©) => üçèjoin ÏïàÌïòÍ≥† Ïª¨Î†âÏÖòÏóêÏÑú select Î°ú Ìò∏Ï∂úÌïòÍ∏∞(Í∂åÏû•) -->
        <!--  ofType : imgs Î¶¨Ïä§Ìä∏Ïùò Ï†úÎÑ§Î¶≠Ïóê Îì§Ïñ¥Í∞à Îç∞Ïù¥ÌÑ∞ ÌÉÄÏûÖ // List <BoardImgDto>  -->
            <!-- üçèÍ≤∞Í≥º : resultMap BoardDto Ïùò ÌïÑÎìú imgs -> BoardDto.imgs , List<BoardImgDto> Î¶¨Ïä§Ìä∏ÌÉÄÏûÖ, Ï†úÎÑ§Î¶≠ÏùÄ BoardImgDto ÌÉÄÏûÖ -->
            <!-- üçècollection Ïùò javaType="java.util.List" Îäî Í∏∞Î≥∏Í∞íÏù¥Îã§. ÏïàÏç®ÎèÑ Ï†ÅÏö©ÎêòÏûàÏùå  -->
<!--        <collection property="imgs" ofType="BoardImgDto" javaType="java.util.List">  -->
<!--            <id property="biId" column="bi_id"/>-->
<!--            <result property="bId" column="b_id"/>-->
<!--            <result property="imgPath" column="img_path"/>-->

<!--            üçèÌÖåÏù¥Î∏î Ïª¨ÎüºÎ™Ö, dto ÌïÑÎìúÎ™ÖÏù¥ Í∞ôÏùÄÎç∞ Ïù¥Î†áÍ≤å Î™ÖÏãúÎ•º ÌïòÎäî Ïù¥Ïú†!
                => collection, association ÏïàÏóê ÎßµÌïëÌï† ÌïÑÎìúÎ•º Íº≠ ÎÑ£Ïñ¥Ï§òÏïº Ìï¥ÏÑú! ÏïàÎÑ£ÏúºÎ©¥ Í∞íÏù¥ ÏïÑÎ¨¥Í≤ÉÎèÑ ÏïàÎì§Ïñ¥Ïò®Îã§ -->
<!--            <id property="bi_id" column="bi_id"/>-->
<!--            <result property="b_id" column="b_id"/>-->
<!--            <result property="img_path" column="img_path"/>-->
<!--        </collection> -->



            <!-- select Îêú Mapper Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Ïùò Ìï®ÏàòÏùò Ï°∞ÌöåÍ≤∞Í≥ºÎ•º property Ïùò Î≥ÄÏàòÎ™ÖÏúºÎ°ú Îã¥ÎäîÍ≤É! Î≥ÄÏàòÎ™Ö user, replies Í∞Ä resultMap Ïùò BoardDto ÌÅ¥ÎûòÏä§Ïùò ÌïÑÎìúÎ°ú Ï°∞Ïù∏Ïù¥ ÎêúÎã§!! -->
            <!-- Î≥¥Îìú : user Í¥ÄÍ≥Ñ  => N : 1  => associtation -->
            <!-- Î≥¥Îìú : reply ÎåìÍ∏Ä Í¥ÄÍ≥Ñ  => 1 : N  => collection -->
<!--        üçèfetchType="eager" : Ï¶âÏãú Ï°∞Ìöå(Ìò∏Ï∂úÏù¥ ÏóÜÏñ¥ÎèÑ Ï°∞Ìöå == Ï°∞Ïù∏ Í∞ôÏù¥ ÎèôÏûë)üî•
            / fetchType="lazy" : ÏßÄÏó∞Î°úÎî©(Ìò∏Ï∂úÏù¥ ÏûàÎäîÏßÄ Í≤ÄÏÉâ(Î∑∞) ÌõÑ ÏûàÏúºÎ©¥ Ï°∞Ìöå) ex) Î¶¨Ïä§Ìä∏ÏóêÏÑú ÎåìÍ∏ÄÏù¥ ÌïÑÏöîÏóÜÏúºÎ©¥ Ï°∞ÌöåÌïòÏßÄ ÏïäÏùå.
            select="namespace.id" : resultMap ÏúºÎ°ú Ï°∞Ìöå(<select>)Ìï† Îïå <collection select Í∞Ä ÏûàÏúºÎ©¥> Ìï¥Îãπ ÌïÑÎìú()Î•º Îã§Î•∏ ÎÇ¥Ïó≠ÏùÑ Ï°∞ÌöåÌï¥ÏÑú ÌååÏã±
            column="b_id : Ï°∞ÌöåÌï† sql Ïùò ÌååÎùºÎØ∏ÌÑ∞Î°ú ÏÇ¨Ïö©Ìï† ÏπºÎüº

            ÏÑúÎπÑÏä§Ïï†ÏÜå Ïã§Ï†úÎ°ú Ï°∞Ïù∏ÏùÄ Í±∞Ïùò ÏóÜÎã§ - fetchType ÏúºÎ°ú Ï°∞Ïù∏ Ìö®Í≥ºÎ•º ÎÇ∏Îã§.
        -->


<!--        resultMap.collection  =>  1:N or N:N    Í¥ÄÍ≥Ñ(Î¶¨Ïä§Ìä∏)ÏùºÎïå Ï°∞ÌöåÌïòÎäî Î∞©Î≤ï -->
<!--        resultMap.association  => N:1 or 1:1     Í¥ÄÍ≥Ñ ÏùºÎïå Ï°∞ÌöåÌïòÎäî Î∞©Î≤ï  -->
<!--        resultMap ÏúºÎ°ú Ï°∞ÌöåÎ•º Ìï†Îïå, BoardReplyMapper.findByBIdAndParentBrIdIsNull Í∞Ä Ï°∞ÌöåÍ∞Ä ÎêòÍ≥†, Ï°∞ÌöåÎêú ÎÇ¥Ïó≠Ïù¥ replies Ïóê Îì§Ïñ¥Ïò®Îã§.
            Ï°∞Í±¥ÏùÄ b_id (Ï°∞ÌöåÌï†Îïå, replies ÎèÑ Ï°∞ÌöåÌïòÍ∏∞ => Ï°∞Ïù∏!)
-->
        <!-- 1:1 ÎòêÎäî 1:N Ï°∞Ïù∏ / ÏÑúÎ∏åÏøºÎ¶¨Î°ú Ïì∏ Ïàò ÏûàÎã§. -->
    </resultMap>
    <!-- namespace Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º Í∏∞Î∞òÏúºÎ°ú ÎßµÌçºÎ•º ÏÉùÏÑ±ÌïòÍ≤†Îã§. -->
    <!-- SELECT LAST_INSERT_ID : auto increment Î°ú Î∞©Í∏à ÏÉùÏÑ±Îêú id Î≤àÌò∏
        useGeneratedKeys="true" : auto increment Î°ú pk Î•º ÏÉùÏÑ±ÌïòÎäîÍ∞Ä? // LAST_INSERT_ID Ìò∏Ï∂ú
        keyProperty="bId" : ÌååÎùºÎØ∏ÌÑ∞Î°ú ÎÑòÏñ¥Ïò® BoardDto Ïóê (keyproperty == boardDto Ïùò ÌïÑÎìúÎ™Ö Í∞Ä ÏûàÎã§.) auto increment Î°ú ÏÉùÏÑ±Îêú ÌÇ§Î•º Î∞òÌôòÌïòÍ≤†Îã§.
    -->
    <!-- üçé2023.3.29 ÎÇ¥ Í∞úÏù∏Ï†ÅÏúºÎ°ú Ï≤òÏùåÏóê maven Ìè¥Îçî ÎßåÎì§Í≥† gradle Ìè¥ÎçîÎ°ú ÏòÆÍ∏∞Î©¥ÏÑú, Mapper Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ïó∞Í≤∞Ïù¥ Ïûò ÏïàÎêòÏÑú, ÌååÎùºÎØ∏ÌÑ∞ ÌÉÄÏûÖÏùÑ Ï†ÑÏ≤¥ Í≤ΩÎ°úÎ°ú Í∞ïÏ†ú ÏßÄÏ†ïÌï®  -->
    <!-- BoardDto ÏóêÏÑú ÌååÎùºÎØ∏ÌÑ∞Î°ú ÎÑòÏñ¥Ïò® bId Ïóê ÏûêÎèôÏÉùÏÑ±Îêú Í∞íÏùÑ Îã¥ÏïÑÏÑú Îã§Ïãú BoardDto Ïóê -->
    <insert useGeneratedKeys="true" keyProperty="bId" id="insertOne" parameterType="BoardDto">
        INSERT INTO boards (u_id, title, content) VALUE (#{uId},#{title},#{content})
    </insert>
    <update id="updateOne" parameterType="BoardDto">
        UPDATE boards SET title=#{title}, content=#{content} WHERE b_id=#{bId}
        <!-- ÌååÎùºÎØ∏ÌÑ∞. BoardDto Í∞Ä Í∞ÄÏßÑ ÌïÑÎìúÎ™ÖÏùÑ Í∑∏ÎåÄÎ°ú Î∞õÎäîÎã§. -->
        <!-- ÌååÎùºÎØ∏ÌÑ∞ ÌÉÄÏûÖÏùÄ ÏÉùÎûµÍ∞ÄÎä•ÌïòÎã§. -->
    </update>
    <update id="updateStatusByBId" parameterType="BoardDto">
        <!-- ÌååÎùºÎØ∏ÌÑ∞ÌÉÄÏûÖÏùÑ ÏïàÏ†ÅÏñ¥ÎèÑ ÎßàÏù¥Î∞îÌã∞Ïä§Í∞Ä ÏûêÎèôÏúºÎ°ú ÌååÎùºÎØ∏ÌÑ∞ÌÉÄÏûÖÏùÑ ÎßûÏ∂∞Ï§ÄÎã§ - Ïù¥Ïú†Îäî? id Ïóê Ìï¥Îãπ ÌååÎùºÎØ∏ÌÑ∞ ÌÉÄÏûÖÏúºÎ°ú Ïì∏ Dto Ïùò Ìï®Ïàò Ïù¥Î¶ÑÏùÑ Ï†ÅÏóàÍ∏∞ ÎïåÎ¨∏Ïóê -->
        UPDATE boards SET status=#{status} WHERE b_id=#{bId}
    </update>
    <update id="updateIncrementViewCountBId">
        UPDATE boards SET view_count=(view_count+1) WHERE b_id=#{bId}
    </update>
    <!--    <update id="updateStatusByBId">-->
<!--        UPDATE boards SET status=#{status} WHERE b_id=#{bId}-->
<!--    </update>-->
    <delete id="deleteOne">
    <!-- <delete id="deleteOne" parameterType="int"> -->
        <!-- ÌååÎùºÎØ∏ÌÑ∞ ÌÉÄÏûÖ int Î°ú Ï†ÅÍ∏∞ -> ÏïàÏ†ÅÏñ¥ÎèÑ ÎêúÎã§
             int Î°ú Ï†ÅÎäîÍ±¥ Î∞õÎäî Îß§Í∞úÎ≥ÄÏàòÍ∞Ä int ÌÉÄÏûÖ b_id ÌïòÎÇòÎùºÏÑú,
             ÎßåÏïΩ ÌååÎùºÎØ∏ÌÑ∞Í∞Ä 2Í∞úÍ∞Ä Ïò®Îã§Í≥† ÌñàÏùÑÎïå, int b_id, String name Ïù¥Îü∞ÏãùÏùºÎïå, ÌååÎùºÎØ∏ÌÑ∞ÌÉÄÏûÖÏùÑ int ÎòêÎäî string Ïñ¥Îñ§Í≤ÉÏúºÎ°ú Ìï†ÏßÄ Ï†ïÌï†Ïàò ÏóÜÏñ¥ÏÑú ÏïàÏ†ÅÎäîÍ±∞Í≥†,
             Ïï†Ï¥àÏóê ÌååÎùºÎØ∏ÌÑ∞ ÌÉÄÏûÖÏùÑ Ïïà Ï†ÅÏñ¥ÎèÑ ÎßàÏù¥Î∞îÌã∞Ïä§Í∞Ä ÏûêÎèôÏúºÎ°ú Ìï¥Îãπ id Ìï®ÏàòÏùò ÌÉÄÏûÖÏúºÎ°ú ÎßûÏ∂∞Ï§ÄÎã§.
        -->
        DELETE FROM boards WHERE b_id=#{bId}
    </delete>



<!--
    &lt;!&ndash; Î≥¥Îìú_Í≤åÏãúÍ∏Ä_Î¶¨Ïä§Ìä∏ // SELECT Î¨∏ // Î≥¥ÎìúÎßµÏóêÏÑú Î≥¥ÎìúÎ¶¨Ïä§Ìä∏Î•º Í∞ÄÏ†∏Ïò¨Îïå &ndash;&gt;
    <select id="findAll" resultMap="BoardMap">
        &lt;!&ndash; Î™®Îì†Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Îäî Î≥ÄÏàòÎ•º Îì±Î°ùÌï†ÏàòÏûàÎã§ => loginUserId ÌååÎùºÎØ∏ÌÑ∞Î°ú ÏÇ¨Ïö©ÌïòÎäîÍ≤å ÏïÑÎãàÎùº Î≥ÄÏàòÎ°ú Ïì∞Í∏∞ &ndash;&gt;
        SELECT *  FROM boards

    </select>
-->

<!-- Î≥¥Îìú_Í≤åÏãúÍ∏Ä_Î¶¨Ïä§Ìä∏ // SELECT Î¨∏ // Î≥¥ÎìúÎßµÏóêÏÑú Î≥¥ÎìúÎ¶¨Ïä§Ìä∏Î•º Í∞ÄÏ†∏Ïò¨Îïå -->
    <!-- ÌïÑÏöîÌïú ÌååÎùºÎØ∏ÌÑ∞ : searchValue : ÏÑúÏπ≠Ìï† ÎÇ¥Ïó≠, order by ÎÇ¥Ïö©, Î∞©Ìñ•, limit startÏù∏Îç±Ïä§, Î≥¥Ïó¨ÏßÄÎäî Í∞úÏàò(offset) -->
<!-- SELECT * FROM boards ORDER BY post_time DESC LIMIT 20,10 -->
<!--    http://localhost:8080/board/list.do?page=1&order=post_time&direct=DESC&searchField=title-->
    <select id="findAll" resultMap="BoardMap" parameterType="PageDto">
        SELECT *
            FROM boards
            <!-- if Ïùò Ï°∞Í±¥Î¨∏ test // Í≤ÄÏÉâÏùÑ ÏúÑÌïú Îã§Ïù¥ÎÇòÎØπ ÏøºÎ¶¨ // ÌååÎùºÎØ∏ÌÑ∞ #{}, dto Î≥ÄÏàò(ÏπºÎüºÎ™ÖÏúºÎ°ú Ïì∞ÏûÑ) ${} -->
            <if test="searchField!=null and searchValue!=null">
                WHERE ${searchField} like concat('%',#{searchValue},'%')
            </if>
            ORDER BY ${order} ${direct}
            LIMIT #{startIndex},#{offset}
    </select>

    <!-- Í≤ÄÏÉâÎêú Ï¥ù Í∞úÏàò => ÌéòÏù¥ÏßïÏùò Í∞úÏàò(Í≤ÄÏÉâÍ∞úÏàò/Ïò§ÌîÑÏÖãÍ∞úÏàò)Î•º ÏïåÏàò ÏûàÎã§. // Í∞úÏàòÎ•º Î∞òÌôòÌïòÎãà. ÌÉÄÏûÖÏùÑ int Î°ú -->
    <select id="countAll" resultType="int" parameterType="PageDto">
        SELECT COUNT(*)
        FROM boards
        <if test="searchField!=null and searchValue!=null">
            WHERE ${searchField} like concat('%',#{searchValue},'%')
        </if>
    </select>

    <!-- Î™®Îì†Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§Îäî Î≥ÄÏàòÎ•º Îì±Î°ùÌï†ÏàòÏûàÎã§ => loginUserId ÌååÎùºÎØ∏ÌÑ∞Î°ú ÏÇ¨Ïö©ÌïòÎäîÍ≤å ÏïÑÎãàÎùº Î≥ÄÏàòÎ°ú Ïä§Í∏∞ -->
    <!--        SELECT *,-->
    <!--        <if test="#{loginUserId!=null}"> &lt;!&ndash; Ïú†Ï†ÄÍ∞Ä Î°úÍ∑∏Ïù∏Ìïú Í≤ΩÏö∞ // Î°úÍ∑∏Ïù∏Ìïú Ïú†Ï†ÄÍ∞Ä null Ïù¥ ÏïÑÎãåÍ≤ΩÏö∞ Îã§Ïù¥ÎÇòÎØπ ÏøºÎ¶¨ &ndash;&gt;-->
    <!--               (SELECT status FROM board_likes WHERE b_id=boards.b_id AND u_id=#{loginUserId})  login_user_like_status-->
    <!--        </if>-->
    <!--        FROM boards-->

<!--    # Î≥µÌï©Í∞ùÏ≤¥ÎßµÌïë-->
<!--    # SELECT b.*,u.name 'user.name' FROM boards b INNER JOIN users u USING (u_id)-->
<!--    #  u.name (users ÌÖåÏù¥Î∏îÏùò ÌïÑÎìú)Î•º resultMap Ïùò BoardMap Ïùò ÌïÑÎìú user(Ïú†Ï†ÄÏ†ïÎ≥¥)Ïùò ÌïÑÎìú name -> user.name ÏúºÎ°ú ÎßµÌïëÌï†ÏàòÏûàÎã§.-->

    <!--  üî•Î≥µÏû°Í∞ùÏ≤¥ÎßµÌïë : Ï°∞Ïù∏Ìï¥ÏÑú Îì§Í≥†Ïò® Í≤∞Í≥ºÎ¨ºÏùÑ Î≥¥ÎìúÎßµÏóê ÏûàÎäî Ïú†Ï†ÄÏùò ÌïÑÎìúÏôÄ ÎßµÌïëÌï† Ïàò ÏûàÎã§. -->
    <!-- ÌïÑÎìúÎ™ÖÏù¥Îûë  ÌååÎùºÎØ∏ÌÑ∞ Ïù¥Î¶ÑÏù¥ Îã§Î•¥Î©¥ Í∞íÏù¥ ÏïàÎ∞õÏïÑÏßÑÎã§ -->
    <!-- resultMap Ïù¥ ÌÖåÏù¥Î∏îÏùò row ÌïòÎÇòÌïòÎÇòÎ•º Î•º ÎßµÌïëÌïúÎã§ => association Ïù¥ ÏûàÏúºÎ©¥ Ï∂úÎ†•ÎêòÎäî u_id Î•º ÌååÎùºÎØ∏ÌÑ∞Î°ú Í∞ÄÏ†∏ÏôÄÏÑú ÎßµÌïë -->
    <!-- association : Ï°∞Ïù∏ÏùÑ ÌïòÎäîÍ≤ÉÎ≥¥Îã§ ÏøºÎ¶¨Ïùò Ïû¨ÏÇ¨Ïö©ÏÑ±Ïù¥ ÎÜíÎã§. // ÏßÄÏó∞Î°úÎî©(lazy)ÏùÑ Ìï† ÏàòÏûàÎã§.(Ï°∞ÌöåÌïòÍ≥† Ïã∂ÏßÄ ÏïäÏùÑÎïå Ï°∞ÌöåÌïòÏßÄ ÏïäÏùÑ Ïàò ÏûàÎã§)-->
    <!-- mybatis Í∞Ä Ìò∏Ï∂úÏùÑÌïòÎäîÏßÄ Î≥∏Îã§ - association Ïóê ÏûàÎäî Í≤ÉÏùÑ Ï†úÏô∏ÌïúÎã§ => Ïù¥Í≤å ÏßÄÏó∞Î°úÎî© -->
<!--    #     Ìò∏Ï∂úÏùÑ ÌïòÎ©¥ mybatisÍ∞Ä Í∑∏Í≤ÉÏùÑ Î≥¥Í≥†, association ÏùÑ Ïã§Ìñâ => Ïù¥Í≤å ÏßÄÏó∞Î°úÎî©-->
<!--    #     spring mybatis Îäî ÏøºÎ¶¨ ÏÇ¨Ïö©ÏùÑ Î≥¥Í≥† ÏûàÎã§Í∞Ä Ïì∞Î©¥ ÏïàÏì∞Î©¥-->
<!--    #     ÏßÄÏó∞Î°úÎî© -> Îç∞Ïù¥ÌÑ∞ Ï†àÍ∞ê => ÎπÑÏö©Ï†àÍ∞ê, ÏÜçÎèÑÌñ•-->


    <select id="findByBId" resultMap="BoardMap">
        SELECT * FROM boards WHERE b_id=#{bId}
        <!-- bId : findByBId Ìï®ÏàòÏùò Îß§Í∞úÎ≥ÄÏàò Ïù¥Î¶ÑÏùÑ Í∑∏ÎåÄÎ°ú Î∞õÎäîÎã§. -->
    </select>

    <select id="findByTag" resultMap="BoardMap">
        SELECT boards.* FROM boards INNER JOIN board_hashtags
                 USING(b_id)
                 WHERE tag=#{tag}
    </select>
<!--    fetch Îäî Ï°∞ÌöåÍ∞Ä ÎÅùÎÇòÍ≥† ÌïòÎÇòÌïòÎÇò Ï°∞ÌöåÌïòÎ©¥ÏÑú Îã§Ïãú Î∂àÎü¨Ïò§Îäî Í≤É-->
<!--    ÏøºÎ¶¨Îäî ÌÖåÏù¥Î∏îÏóê Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò§Îäî Í±∞. ÏùºÎã® Ï°∞ÌöåÎ•º Ìï¥ÏïºÌïòÎäîÍ≤É. Ï°∞ÌöåÎ•º ÌïòÍ≥† Í≤∞Í≥ºÏóê association, collection ÏúºÎ°ú Î∂àÎü¨Ïò§ÎäîÍ±∞ -->



<!--    üçâÎèôÏùºÌïú ÏøºÎ¶¨Î¨∏ => SELECT * FROM webAppBoard.boards WHERE b_id in (SELECT b_id FROM webAppBoard.board_hashtags WHERE tag='ÌôçÎåÄ')-->
<!--#         SELECT *,hashtags.tag FROM boards INNER JOIN hashtags WHERE tag=#{tag}-->


    <!--     üçè association ÏùÄ  N : 1 join (Í≤∞Í≥º 1Í∞ú Î∞òÌôò) /  collection ÏùÄ  1 : N join (Í≤∞Í≥º Ïó¨Îü¨Í∞ú(List) Î∞òÌôò)
                association ÏùÄ resultType ÏúºÎ°úÎèÑ ÎßµÌïë,Ï°∞Ïù∏ Í∞ÄÎä•ÌïòÏßÄÎßå
                collection ÏùÄ resultMap ÏúºÎ°úÎßå ÎßµÌïë, Ï°∞Ïù∏ Í∞ÄÎä•ÌïòÎã§.
    -->

<!--     1)üçè 1:N (Î≥¥Îìú : Ïù¥ÎØ∏ÏßÄ)Í¥ÄÍ≥Ñ Ïª¨Î†âÏÖò Î≥µÌï©Í¥ÄÍ≥Ñ ÎßµÌïë Ï°∞Ïù∏ÌïòÎäî Î≤ï => resultMap ÏóêÏÑúÎèÑ collection ÏúºÎ°ú Î≥µÌï©ÎßµÌïë-->
<!--    <select id="findAll" resultMap="BoardMap">-->
<!--        SELECT * FROM boards b LEFT JOIN board_imgs i USING (b_id)-->
<!--        # SELECT b.*,i.bi_id 'imgs.bi_id' FROM boards b LEFT JOIN board_imgs i USING (b_id)-->
<!--        # board_imgs ÌÖåÏù¥Î∏îÏùò bi_id Ïª¨ÎüºÎ™ÖÏùÑ 'imgs.bi_id' Î°ú Îã§Î•∏Ïù¥Î¶Ñ(Î≥ÑÏπ≠)ÏúºÎ°ú Ï°∞Ìöå(Ï∂úÎ†•)-->
<!--    </select> -->
<!--     üçè 1:N  Î≥µÌï©Í¥ÄÍ≥Ñ ÎßµÌïëÏùÄ resultType ÏúºÎ°ú ÎßµÌïëÏù¥ ÏïàÎêòÍ≥†(Í≤∞Í≥ºÍ∞Ä ÏïàÎÇòÏò¥), resultMap collection ÏúºÎ°ú ÎßµÌïëÏùÑ Ìï¥ÏïºÌïúÎã§. -->
<!--        <select id="findAll" resultType="boardDto">-->
<!--            SELECT *,i.bi_id 'imgs.biId', i.img_path 'imgs.imgPath' FROM boards NATURAL JOIN board_imgs i-->
<!--            üçéÍ≤∞Í≥º : board_imgs ÌÖåÏù¥Î∏îÏùò bi_id ÏôÄ boardDto Ïùò imgs Ïùò ÌïÑÎìú biId Î•º ÎßµÌïë, Ïù¥Î¶ÑÏùÑ ÎßûÏ∂îÍ≤†Îã§.
                   Ïôú? mybatis Í∞Ä resultType ÏúºÎ°ú Ï†ïÏùòÎêú DTO ÌïÑÎìúÎ™ÖÍ≥º Î∞òÌôòÎêòÎäî ÌÖåÏù¥Î∏îÏùò ÏπºÎüºÎ™Ö Ïù¥Î¶ÑÏù¥ Í∞ôÏïÑÏïºÏßÄ ÎßµÌïëÏùÑ Ìï¥ÏÑú Î∞òÌôòÌïòÎãàÍπå! -->
<!--            üçâ i.bi_id => board_imgs ÌÖåÏù¥Î∏îÏùò ÏπºÎüºÎ™Ö bi_id    -->
<!--            üçâ 'imgs.biId'
                    1) imgs : resultType boardDto Ïùò ÌïÑÎìúÎ™Ö // private List<BoardImgDto> imgs
                    2) BoardImgDto ÌÉÄÏûÖÏùò imgs Ïùò BoardImgDto Ïùò ÌïÑÎìúÎ™Ö biId    -->
<!--        </select>-->


<!--     2)üçè N:1 (Î≥¥Îìú : Ïú†Ï†Ä) Í¥ÄÍ≥Ñ Î≥µÌï©Í¥ÄÍ≥Ñ ÎßµÌïë Ï°∞Ïù∏ => Î≥¥Îìú Ï°∞ÌöåÏãú Ïú†Ï†ÄÎäî ÌïúÎ™ÖÎßå ÎÇòÏò®Îã§.
            resultMap Ïóê association user ÏóÜÏñ¥ÎèÑ Îê®, Îã® resultMap Ïóê association Ïù¥ ÏóÜÍ∏∞ ÎïåÎ¨∏Ïóê
            resultType ÏùÑ resultMap Ïù¥ ÏïÑÎãå boardDto Î°ú ÏßÄÏ†ïÌï¥Ï§òÏïº ÌïúÎã§. (resultMap Ïóê ÏóÜÏúºÎ©¥ resultMap ÏùÑ resultType ÏúºÎ°ú Ïì∏Ïàò ÏóÜÏùå )-->

<!--        üçèresultMap association user Î•º Ïì∞Í≤åÎêòÎ©¥ association Ïù¥ ÎßµÌïëÏùÑ Ìï¥Ï£ºÎØÄÎ°ú
            1) resultType ÎåÄÏã† resultMap ÏùÑ ÏÇ¨Ïö©
            2) SELECT * FROM board NATURAL JOIN users Î°úÎßå Ìï¥ÎèÑ ÎêúÎã§. (ÏπºÎüºÎ™Ö Î≥ÑÏπ≠ÏúºÎ°ú ÎßµÌïë ÏïàÌï¥ÎèÑ ÎêúÎã§)
            'user.name' ÏóêÏÑú user Îäî boardDto ÏóêÏÑú private UserDto user Ïùò  UserDto ÌïÑÎìú name ÏùÑ ÎúªÌïúÎã§.-->

<!--        <select id="findAll" resultType="boardDto">-->
<!--            SELECT *,u.name 'user.name', u.phone 'user.phone' FROM boards NATURAL JOIN users u-->
<!--        </select>-->

</mapper>