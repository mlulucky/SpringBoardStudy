<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.acorn.springboardstudy.mapper.HashTagMapper">
    <resultMap id="HashTagMap" type="HashTagDto">
        <id property="tag" column="tag"/>
<!--        bCnt ë¡œ ë§µí•‘, countByTag ì¿¼ë¦¬ ì‹¤í–‰. ì¡°ê±´ì€ tag-->
        <association property="bCnt"
        select="com.acorn.springboardstudy.mapper.BoardHashTagMapper.countByTag"
        column="tag"/>

    </resultMap>
    <insert id="insertOne">
        INSERT INTO hashtags (tag) VALUE(#{tag});
    </insert>
<!--        # í•´ì‹œíƒœê·¸ ì—°ê´€ê²€ìƒ‰ì–´ ì¡°íšŒ-->
<!--        # ðŸ‰mysql ì€ ë¬¸ìžì—´ ë”í•˜ê¸° ì—°ì‚°ì„ ëª»ì“´ë‹¤ #{tag}+'%' -> mysql ë¬¸ìžì—´ ë”í•˜ê¸° í•¨ìˆ˜ ì‚¬ìš© CONCAT (ìžë°”ë„ string.CONCAT() ì´ ìžˆë‹¤)-->
    <select id="findByTagContains" resultMap="HashTagMap">
        SELECT * FROM webAppBoard.hashtags WHERE tag like CONCAT(#{tag},'%')
    </select>
    <select id="findByTag" resultMap="HashTagMap">
        SELECT * FROM webAppBoard.hashtags WHERE tag=#{tag}
    </select>

</mapper>