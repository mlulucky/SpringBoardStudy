<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout}">
<head>
    <meta charset="UTF-8">
    <title>게시판 리스트</title>
</head>
<div layout:fragment="content">
    <h1 class="my-4">게시판 리스트</h1>
<!--    <p th:text="${boards}"></p>--> <!-- 게시글 불러와지는지 체크 (컨트롤러에서 boards 객체를 보냄)-->
    <section id="boardListCont" class="row row-cols-lg-2 row-cols-1 g-5"> <!-- g : 요소간의 간격 --> <!-- md 사이즈일때만, 그리드의 비율을 3개로 / row-cols-1 : 스몰사이즈일때 -->
        <div class="col" th:each="b:${boards}">
            <div class="card"> <!-- boards 의 요소만큼을 반복해서 하나씩 배오기 (반복문) -->
                <div class="card-header d-flex justify-content-between align-items-center"> <!-- 오른쪽 끝으로 보내기 / stretch 속성으로 아이콘이 위로 올라간다 => 세로중아 맞추기 align-items-center -->
                    <div>
                        <!-- 있을때만 이미지를 출력하겠다 th:if="${b.user.imgPath!=null}" -->
                        <img  th:if="${b.user.imgPath!=null}"
                              th:src="@{'{path}'(path=${b.user.imgPath})}"
                              alt="프로필이미지"
                              style="width: 100px; object-fit: cover;" class="img-thumbnail"> <!-- object-fit:cover - 사진비율 맞춰준다. -->
                        <strong class="ms-2" th:text="${b.user.uId}"></strong> <!-- margin-start -->
                        (<strong th:text="${b.user.name}"></strong>)
                        <small class="text-muted">•</small>
                        <small th:text="${#dates.format(b.postTime,'yyy-MM-dd')}"></small> <!-- date.format(데이트객체, 포맷) 으로 날짜 예쁘게 수정하기 -->  <!-- b.postTime 자바객체 : Tue Mar 28 11:34:12 KST 2023 -->
                    </div>
                    <div class="dropdown">
                        <a href="#" role="button" class="" data-bs-toggle="dropdown"> <!-- a태그 버튼으로 역할주기 -->
                            <i class="bi bi-three-dots fs-4"></i> <!-- fs : font-size --> <!-- 웹자르 라이브러리는 추가후에 서버를 껏다 켜야 적용이 된다. -->
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a class="dropdown-item" th:href="@{'/board/{bId}/detail.do'(bId=${b.bId})}">글 상세</a>
                            </li>
                            <li><a class="dropdown-item" href="#">글쓴이가 작성한 글목록</a></li>
                            <li><a class="dropdown-item" href="#">계정 정보</a></li>
                            <li>
                                <a class="dropdown-item text-danger" href="#">
                                    <i class="bi bi-bell"></i>
                                    신고
                                </a>
                            </li>
                        </ul>
                    </div>
                </div> <!-- // 카드 header : 아이디, 이름, 작성일, 더보기 버튼 -->
                <div class="card-body">
                    <!-- 이미지 -->
                    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="/public/img/board/춘식이라이언.jpg" class="d-block w-100" alt="게시글 이미지">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div> <!-- // 이미지 -->

                    <div>
                        <h5 class="card-title" th:text="${b.title}"></h5>
                        <p class="card-text" th:text="${b.content}"></p>
                    </div>
                </div> <!-- // 카드 body : 이미지, 제목, 내용 -->

                <div class="card-footer  d-flex align-items-center">
                    <div class="likesCont"> <!-- 툴팁 - 레이아웃파일에 자바스크립트 추가해야함. -->
                        <a href="#" class="btn btn-sm btn-link" data-bs-toggle="tooltip" data-bs-title="좋아요" data-bs-placement="top">
                            <i class="bi bi-emoji-heart-eyes text-danger fs-4"></i> <!-- bi : bootstrap icon -->
                            <span th:text="${b.likes.like}"></span> <!-- 지연로딩으로 불러온다 -->
                        </a>
                        <a href="#" class="btn btn-sm btn-link" data-bs-toggle="tooltip" data-bs-title="최고야" data-bs-placement="top">
                            <i class="bi bi-emoji-sunglasses fs-4"></i>
                            <span th:text="${b.likes.best}"></span>
                        </a>
                        <a href="#" class="btn btn-sm btn-link" data-bs-toggle="tooltip" data-bs-title="나빠요" data-bs-placement="top">
                            <i class="bi bi-emoji-expressionless fs-4"></i>
                            <span th:text="${b.likes.bad}"></span>
                        </a>
                        <a href="#" class="btn btn-sm btn-link" data-bs-toggle="tooltip" data-bs-title="슬퍼요" data-bs-placement="top">
                            <i class="bi bi-emoji-frown fs-4"></i>
                            <span th:text="${b.likes.sad}"></span>
                        </a>
                    </div>
                    <small class="text-muted">•</small>
                    <div class="viewCont ms-2"  data-bs-toggle="tooltip" data-bs-title="조회수" data-bs-placement="top">
                        <i class="bi bi-eye fs-4"></i>
                        조회수 : <span th:text="${b.viewCount}"></span>
                    </div>
                    <small class="text-muted mx-2">•</small>
                    <div data-bs-toggle="tooltip" data-bs-title="수정일" data-bs-placement="top">
                        <small th:text="${#dates.format(b.updateTime,'yyy-MM-dd')}"></small>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
</html>